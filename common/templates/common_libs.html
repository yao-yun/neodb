{% load static %}
{% load sass_tags %}
{% load tz_detect %}
{% if request.user.is_authenticated %}
  {% tz_detect %}
{% endif %}
{% if jquery %}
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>
{% else %}
  <script src="https://cdn.jsdelivr.net/npm/cash-dom@8.1.5/dist/cash.min.js"></script>
{% endif %}
<script type="text/javascript">
  if (!$.fn.is_visible) $.fn.is_visible = function () {
    return this.filter((_, elt) => (elt.offsetWidth || elt.offsetHeight || elt.getClientRects().length)).length > 0;
  };
  if (!$.fn.submit) $.fn.submit = function () {
    this.each(function () {
      $(this).trigger('submit');
      this.submit();
    });
    return this;
  };
</script>
<script src="https://cdn.jsdelivr.net/npm/htmx.org@1.9.6/dist/htmx.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/hyperscript.org@0.9.12"></script>
<link rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@picocss/pico@2.0.0-alpha1/css/pico.min.css" />
<link href="{% sass_src 'scss/neodb.scss' %}"
      rel="stylesheet"
      type="text/css" />
<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.2/css/all.min.css"
      rel="stylesheet"
      type="text/css">
<link rel="search"
      type="application/opensearchdescription+xml"
      title="{{ site_name }}"
      href="{% static 'opensearch.xml' %}">
<script defer>
(function(){
  const s = localStorage.getItem("user_style");
  if (s) {
    const style = document.createElement("style");
    style.innerHTML = s;
    document.head.appendChild(style);
  }
  const solo = localStorage.getItem("solo_mode")=="1";
  if (solo) {
    const style = document.createElement("style");
    style.innerHTML = ".solo-hidden {display: none;}";
    document.head.appendChild(style);
  }
})();
</script>
<link rel="icon" href="{{ site_icon }}">
<link rel="apple-touch-icon" href="{{ site_logo }}">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="{{ site_name }}">
